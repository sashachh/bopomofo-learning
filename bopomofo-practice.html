<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bopomo.fo - Practice</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HYYX315R8M"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-HYYX315R8M');
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 10px;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
        }

        .logo-text {
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
            font-weight: bold;
            letter-spacing: -1px;
        }

        .logo-text .bopo {
            color: white;
        }

        .logo-text .mo {
            color: #ffd700;
        }

        .logo-text .fo {
            color: #ff6b6b;
        }

        .logo-text .dot {
            color: #4ecdc4;
        }

        header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .nav-links {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .nav-link {
            color: white;
            text-decoration: none;
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 25px;
            transition: background 0.3s;
        }

        .nav-link:hover {
            background: rgba(255,255,255,0.3);
        }

        .nav-link.active {
            background: rgba(255,255,255,0.4);
            font-weight: bold;
        }

        /* Controls */
        .controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .control-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .control-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .control-btn.active {
            background: rgba(255,255,255,0.4);
            font-weight: bold;
        }

        /* Progress */
        .progress {
            text-align: center;
            color: white;
            margin-bottom: 20px;
            font-size: 1.1rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.2);
            border-radius: 4px;
            margin-top: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: white;
            border-radius: 4px;
            transition: width 0.3s;
        }

        /* Flashcard */
        .flashcard-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 30px;
        }

        .flashcard {
            width: 300px;
            height: 350px;
            perspective: 1000px;
            cursor: pointer;
        }

        .flashcard-inner {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }

        .flashcard-front,
        .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .flashcard-front {
            background: white;
        }

        .flashcard-back {
            background: linear-gradient(145deg, #4facfe, #00f2fe);
            transform: rotateY(180deg);
            color: white;
        }

        .flashcard-symbol {
            font-size: 8rem;
            font-weight: bold;
            color: #333;
            line-height: 1;
        }

        .flashcard-hint {
            font-size: 1rem;
            color: #999;
            margin-top: 20px;
        }

        .flashcard-answer {
            font-size: 3rem;
            font-weight: bold;
        }

        .flashcard-label {
            font-size: 1rem;
            opacity: 0.8;
            margin-top: 10px;
        }

        .flashcard-type {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(0,0,0,0.1);
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            color: #666;
        }

        .flashcard-back .flashcard-type {
            color: rgba(255,255,255,0.8);
            background: rgba(255,255,255,0.2);
        }

        /* Navigation buttons */
        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .nav-btn {
            background: white;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.5rem;
            color: #333;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s;
        }

        .nav-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.25);
        }

        .nav-btn:active {
            transform: scale(0.95);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .nav-btn:disabled:hover {
            transform: none;
        }

        /* Sound button */
        .sound-btn {
            position: absolute;
            bottom: 15px;
            right: 15px;
            background: rgba(0,0,0,0.1);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s;
        }

        .sound-btn:hover {
            background: rgba(0,0,0,0.2);
        }

        .flashcard-back .sound-btn {
            background: rgba(255,255,255,0.2);
        }

        .flashcard-back .sound-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        /* Instructions */
        .instructions {
            text-align: center;
            color: rgba(255,255,255,0.8);
            font-size: 0.9rem;
            margin-bottom: 20px;
        }

        footer {
            text-align: center;
            color: rgba(255,255,255,0.7);
            margin-top: 40px;
            padding: 20px;
            font-size: 0.9rem;
        }

        @media (max-width: 600px) {
            .flashcard {
                width: 260px;
                height: 300px;
            }

            .flashcard-symbol {
                font-size: 6rem;
            }

            .flashcard-answer {
                font-size: 2.5rem;
            }

            .nav-btn {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <img src="logo.svg" alt="bopomo.fo" class="logo-icon">
                <div class="logo-text"><span class="bopo">bopo</span><span class="mo">mo</span><span class="dot">.</span><span class="fo">fo</span></div>
            </div>
            <p>Flashcard Practice</p>
            <nav class="nav-links">
                <a href="index.html" class="nav-link">Learn</a>
                <a href="bopomofo-practice.html" class="nav-link active">Practice</a>
                <a href="bopomofo-quiz.html" class="nav-link">Quiz</a>
                <a href="bopomofo-faq.html" class="nav-link">FAQ</a>
            </nav>
        </header>

        <div class="controls">
            <button class="control-btn active" data-filter="all">All</button>
            <button class="control-btn" data-filter="consonants">Consonants</button>
            <button class="control-btn" data-filter="vowels">Vowels</button>
            <button class="control-btn" data-filter="tones">Tones</button>
            <button class="control-btn" id="shuffleBtn">Shuffle</button>
        </div>

        <div class="progress">
            <span id="progressText">Card 1 of 42</span>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 2.4%"></div>
            </div>
        </div>

        <div class="flashcard-container">
            <div class="flashcard" id="flashcard">
                <div class="flashcard-inner">
                    <div class="flashcard-front">
                        <span class="flashcard-type" id="cardType">Consonant</span>
                        <span class="flashcard-symbol" id="cardSymbol">„ÑÖ</span>
                        <span class="flashcard-hint">Click to flip</span>
                        <button class="sound-btn" id="soundBtnFront">üîä</button>
                    </div>
                    <div class="flashcard-back">
                        <span class="flashcard-type" id="cardTypeBack">Consonant</span>
                        <span class="flashcard-answer" id="cardAnswer">b</span>
                        <span class="flashcard-label">pinyin</span>
                        <button class="sound-btn" id="soundBtnBack">üîä</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="nav-buttons">
            <button class="nav-btn" id="prevBtn">‚Üê</button>
            <button class="nav-btn" id="nextBtn">‚Üí</button>
        </div>

        <div class="instructions">
            <p>Click the card to flip ‚Ä¢ Use arrows to navigate ‚Ä¢ Press Space to flip, ‚Üê ‚Üí to navigate</p>
        </div>

        <footer>
            <p>Master all 42 symbols to read Bopomofo fluently!</p>
        </footer>
    </div>

    <script>
        // GCIN voice data CDN base URL (Taiwan MOE standard pronunciation)
        const GCIN_BASE = 'https://audreyt.github.io/gcin-voice-data/mp3';

        const bopomofoData = {
            consonants: [
                { symbol: '„ÑÖ', pinyin: 'b', syllable: '„ÑÖ„Ñõ', tone: 1 },
                { symbol: '„ÑÜ', pinyin: 'p', syllable: '„ÑÜ„Ñõ', tone: 1 },
                { symbol: '„Ñá', pinyin: 'm', syllable: '„Ñá„Ñõ', tone: 1 },
                { symbol: '„Ñà', pinyin: 'f', syllable: '„Ñà„Ñõ', tone: 2 },
                { symbol: '„Ñâ', pinyin: 'd', syllable: '„Ñâ„Ñú', tone: 2 },
                { symbol: '„Ñä', pinyin: 't', syllable: '„Ñä„Ñú', tone: 4 },
                { symbol: '„Ñã', pinyin: 'n', syllable: '„Ñã„Ñú', tone: 4 },
                { symbol: '„Ñå', pinyin: 'l', syllable: '„Ñå„Ñú', tone: 4 },
                { symbol: '„Ñç', pinyin: 'g', syllable: '„Ñç„Ñú', tone: 1 },
                { symbol: '„Ñé', pinyin: 'k', syllable: '„Ñé„Ñú', tone: 1 },
                { symbol: '„Ñè', pinyin: 'h', syllable: '„Ñè„Ñú', tone: 1 },
                { symbol: '„Ñê', pinyin: 'j', syllable: '„Ñê„Ñß', tone: 1 },
                { symbol: '„Ñë', pinyin: 'q', syllable: '„Ñë„Ñß', tone: 1 },
                { symbol: '„Ñí', pinyin: 'x', syllable: '„Ñí„Ñß', tone: 1 },
                { symbol: '„Ñì', pinyin: 'zh', syllable: '„Ñì', tone: 1 },
                { symbol: '„Ñî', pinyin: 'ch', syllable: '„Ñî', tone: 1 },
                { symbol: '„Ñï', pinyin: 'sh', syllable: '„Ñï', tone: 1 },
                { symbol: '„Ññ', pinyin: 'r', syllable: '„Ññ', tone: 4 },
                { symbol: '„Ñó', pinyin: 'z', syllable: '„Ñó', tone: 1 },
                { symbol: '„Ñò', pinyin: 'c', syllable: '„Ñò', tone: 1 },
                { symbol: '„Ñô', pinyin: 's', syllable: '„Ñô', tone: 1 }
            ],
            vowels: [
                { symbol: '„Ñö', pinyin: 'a', syllable: '„Ñö', tone: 1 },
                { symbol: '„Ñõ', pinyin: 'o', syllable: '„Ñõ', tone: 1 },
                { symbol: '„Ñú', pinyin: 'e', syllable: '„Ñú', tone: 4 },
                { symbol: '„Ñù', pinyin: '√™', syllable: '„Ñß„Ñù', tone: 1 },
                { symbol: '„Ñû', pinyin: 'ai', syllable: '„Ñû', tone: 1 },
                { symbol: '„Ñü', pinyin: 'ei', syllable: '„Ñü', tone: 1 },
                { symbol: '„Ñ†', pinyin: 'ao', syllable: '„Ñ†', tone: 1 },
                { symbol: '„Ñ°', pinyin: 'ou', syllable: '„Ñ°', tone: 1 },
                { symbol: '„Ñ¢', pinyin: 'an', syllable: '„Ñ¢', tone: 1 },
                { symbol: '„Ñ£', pinyin: 'en', syllable: '„Ñ£', tone: 1 },
                { symbol: '„Ñ§', pinyin: 'ang', syllable: '„Ñ§', tone: 1 },
                { symbol: '„Ñ•', pinyin: 'eng', syllable: '„Ñ•', tone: 1 },
                { symbol: '„Ñ¶', pinyin: 'er', syllable: '„Ñ¶', tone: 2 },
                { symbol: '„Ñß', pinyin: 'i', syllable: '„Ñß', tone: 1 },
                { symbol: '„Ñ®', pinyin: 'u', syllable: '„Ñ®', tone: 1 },
                { symbol: '„Ñ©', pinyin: '√º', syllable: '„Ñ©', tone: 1 }
            ],
            tones: [
                { symbol: 'Àâ', pinyin: '1st (high)', syllable: '„Ñá„Ñö', tone: 1 },
                { symbol: 'Àä', pinyin: '2nd (rising)', syllable: '„Ñá„Ñö', tone: 2 },
                { symbol: 'Àá', pinyin: '3rd (dip)', syllable: '„Ñá„Ñö', tone: 3 },
                { symbol: 'Àã', pinyin: '4th (falling)', syllable: '„Ñá„Ñö', tone: 4 },
                { symbol: 'Àô', pinyin: 'neutral', syllable: '„Ñá„Ñö', tone: 1 }
            ]
        };

        let currentCards = [];
        let currentIndex = 0;
        let currentFilter = 'all';

        function buildCardDeck(filter) {
            currentCards = [];

            if (filter === 'all' || filter === 'consonants') {
                bopomofoData.consonants.forEach(item => {
                    currentCards.push({ ...item, type: 'Consonant' });
                });
            }
            if (filter === 'all' || filter === 'vowels') {
                bopomofoData.vowels.forEach(item => {
                    currentCards.push({ ...item, type: 'Vowel' });
                });
            }
            if (filter === 'all' || filter === 'tones') {
                bopomofoData.tones.forEach(item => {
                    currentCards.push({ ...item, type: 'Tone' });
                });
            }
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function updateCard() {
            const card = currentCards[currentIndex];
            document.getElementById('cardSymbol').textContent = card.symbol;
            document.getElementById('cardAnswer').textContent = card.pinyin;
            document.getElementById('cardType').textContent = card.type;
            document.getElementById('cardTypeBack').textContent = card.type;

            // Update progress
            document.getElementById('progressText').textContent =
                `Card ${currentIndex + 1} of ${currentCards.length}`;
            document.getElementById('progressFill').style.width =
                `${((currentIndex + 1) / currentCards.length) * 100}%`;

            // Reset flip state
            document.getElementById('flashcard').classList.remove('flipped');

            // Update button states
            document.getElementById('prevBtn').disabled = currentIndex === 0;
            document.getElementById('nextBtn').disabled = currentIndex === currentCards.length - 1;
        }

        function playSound() {
            const card = currentCards[currentIndex];
            const audioUrl = `${GCIN_BASE}/${encodeURIComponent(card.syllable)}/${card.tone}.mp3`;
            const audio = new Audio(audioUrl);
            audio.play().catch(err => console.error('Audio error:', err));
        }

        // Event listeners
        document.getElementById('flashcard').addEventListener('click', (e) => {
            if (!e.target.classList.contains('sound-btn')) {
                document.getElementById('flashcard').classList.toggle('flipped');
            }
        });

        document.getElementById('soundBtnFront').addEventListener('click', (e) => {
            e.stopPropagation();
            playSound();
        });

        document.getElementById('soundBtnBack').addEventListener('click', (e) => {
            e.stopPropagation();
            playSound();
        });

        document.getElementById('prevBtn').addEventListener('click', () => {
            if (currentIndex > 0) {
                currentIndex--;
                updateCard();
            }
        });

        document.getElementById('nextBtn').addEventListener('click', () => {
            if (currentIndex < currentCards.length - 1) {
                currentIndex++;
                updateCard();
            }
        });

        document.getElementById('shuffleBtn').addEventListener('click', () => {
            shuffleArray(currentCards);
            currentIndex = 0;
            updateCard();
        });

        // Filter buttons
        document.querySelectorAll('.control-btn[data-filter]').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.control-btn[data-filter]').forEach(b =>
                    b.classList.remove('active'));
                btn.classList.add('active');
                currentFilter = btn.dataset.filter;
                buildCardDeck(currentFilter);
                currentIndex = 0;
                updateCard();
            });
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                document.getElementById('flashcard').classList.toggle('flipped');
            } else if (e.code === 'ArrowLeft' && currentIndex > 0) {
                currentIndex--;
                updateCard();
            } else if (e.code === 'ArrowRight' && currentIndex < currentCards.length - 1) {
                currentIndex++;
                updateCard();
            }
        });

        // Initialize
        buildCardDeck('all');
        updateCard();
    </script>
</body>
</html>
